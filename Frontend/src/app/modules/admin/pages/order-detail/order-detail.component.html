<div class="w-full h-full flex flex-col ">
 <div class="flex w-full pt-4 bg-white">
  <tds-page-header title="Quản lí giao hàng">
   <tds-page-header-content>
    <div class="w-full">
     <a routerLink="/admin/order" routerLinkActive #rls="routerLinkActive">
      <tds-tag mode="checkable" [disabled]="true" [checked]="rls.isActive"
       [rounded]='rls.isActive ? "rounded-full":"rounded-full rounded-full !border-0"' class="mr-2">
       Đơn hàng
      </tds-tag>
     </a>
     <!-- <a routerLink="/setting-resource/accset/accset-type" routerLinkActive #rlp="routerLinkActive">
      <tds-tag mode="checkable" [disabled]="true" [checked]="rlp.isActive"
       [rounded]='rlp.isActive ? "rounded-full":"rounded-full rounded-full !border-0"' class="mr-2">
       Đơn hàng
      </tds-tag>
     </a> -->
    </div>
   </tds-page-header-content>
  </tds-page-header>
 </div>
 <div class="flex-auto p-4 h-full w-full">
 <div class="bg-white  w-full pb-2.5 h-full  rounded-lg  overflow-hidden  flex flex-col">
  <div class="flex items-center  justify-between px-4 py-2.5">
   <div class="flex items-center  justify-between px-4">
    <tds-filter-status [(ngModel)]='selected' (selectChange)="onSelectChange($event)">
     <ng-template ngFor let-item [ngForOf]="lstData" let-i="index">
      <tds-filter-status-item [name]='item.name' [count]='item.count!' [value]="item.value">
       <ng-template tds-filter-status-template let-active='active' let-disabled="disabled" let-count='count'
        let-name='name' let-value>
        <div class="p-4 flex items-center" [ngClass]="{'border-b-3 border-primary-1':active,'hover:border-b-3
                     hover:border-primary-1 group':!disabled}">
         <div class="flex items-center">
          <div class="text-body-2 mr-2 font-semibold" [ngClass]="{'text-primary-1':active,'text-neutral-1-400
                         group-hover:text-neutral-1-900':!active}">
           {{name}}
          </div>
         </div>
        </div>
       </ng-template>
      </tds-filter-status-item>
     </ng-template>
    </tds-filter-status>
    <div class="flex gap-2">
     <!-- <button tds-button color="primary">
       <span class="flex items-center">
        <i class="tdsi-plus-circle-fill text-lg leading-none mr-2"></i>Thêm sản phẩm mới
       </span>
      </button>
      <button tds-button color="secondary">
       <span class="flex items-center">Nhập hàng
       </span>
      </button>
      <tds-form-field>
       <input class="w-96" tdsInput autocomplete="off" [tdsInputDebounce]="500" placeholder="Tìm kiếm theo tên sản phẩm" />
       <span tdsPrefix><i class="tdsi-search-fill"></i></span>
      </tds-form-field>
      <button tds-button-outline-icon color="secondary" class="context-area">
       <i class="tdsi-filter-2-line text-neutral-1-500 border-neutral-2-200"></i>
      </button>
      <tds-dropdown-menu #menu1="tdsDropdownMenu">
       <div class="flex flex-col gap-8 p-4">
        <div class="flex flex-col gap-3">
         <div class="font-semibold text-xs text-neutral-1-900">LỌC THEO NHÀ SẢN XUẤT</div>
         <div class="flex gap-1">
         </div>
        </div>
        <div class="flex flex-col gap-3">
         <div class="font-semibold text-xs text-neutral-1-900">LỌC THEO TÊN</div>
         <div class="flex  gap-1">
   
         </div>
        </div>
        <div class="flex justify-end gap-3">
         <button tds-button color="secondary">Hủy</button>
         <button (click)="onFilter()" tds-button color="primary">Áp dụng</button>
        </div>
       </div>
      </tds-dropdown-menu>
      <button tds-button-outline-icon color="secondary">
       <i class="tdsi-marketing-fill text-neutral-1-500 border-neutral-2-200"></i>
      </button> -->
    </div>
   </div>
   <div class="flex gap-2">
    <tds-form-field>
     <input class="w-96" tdsInput autocomplete="off" placeholder="Tìm kiếm theo tên đơn hàng" [required]="true" />
     <span tdsPrefix><i class="tdsi-search-fill"></i></span>
    </tds-form-field>
    <button (click)="onDeleteAll()" tds-button-outline-icon color="secondary">
     <i class="tdsi-trash-fill text-neutral-1-500 border-neutral-2-200"></i>
    </button>
   </div>
  </div>
  <div class="w-full h-full">
   <tds-table #rowSelectionTable showSizeChanger [loading]="loading" [listData]="lstOrderDetail" [scroll]="{y:'auto'}"
    (currentPageDataChange)="onCurrentPageDataChange($event)">
    <thead>
     <tr>
      <th width="48px" [(checked)]="checked" [indeterminate]="indeterminate" (checkedChange)="onAllChecked($event)">
      </th>
      <th width="50px">STT</th>
      <th width="150px">Địa chỉ đơn hàng</th>
      <th width="100px">Khách hàng</th>
      <th width="70px">Đại lý</th>
      <th width="100px">Người giao</th>
      <th width="100px">Thanh toán</th>
      <th width="150px">Trạng thái</th>
      <th width="106px" [tdsRight]="true">Thao tác</th>
     </tr>
    </thead>
    <tbody>
     <ng-template ngFor let-data [ngForOf]="rowSelectionTable.data" let-index='index' let-odd='odd'>
      <tr>
       <td width="48px" [checked]="setOfCheckedId.has(data)" (checkedChange)="onItemChecked(data, $event)"></td>
       <td width="50px">{{ index+1}}</td>
       <td width="150px"></td>
       <td width="100px">
        <!-- <div *ngFor="let item of data.order; let i=index;" class="flex gap-4 ">
         `{{item.product.name}} Số lượng {{item.buy}} Thành tiền: {{item.buy * item.amount | currency: "VND"}}`
        </div> -->
       </td>
       <td width="70px"></td>
       <td width="100px"></td>
       <td width="100px">{{ data.payment }}</td>
       <td width="150px">
        <div [ngSwitch]="data.status" class="">
         <tds-tag *ngSwitchCase="'Waiting for confirm'" status='success' type="outline"
          class="text-body-2 font-regular text-neutral-1-900">Đang chờ phê duyệt</tds-tag>
         <tds-tag *ngSwitchCase="2" status='error' type="outline" class="text-body-2 font-regular text-neutral-1-900">
          Đã phê duyệt</tds-tag>
         <tds-tag *ngSwitchCase="3" status='warning' type="outline" class="text-body-2 font-regular text-neutral-1-900">
          Đã gửi vận chuyển</tds-tag>
         <tds-tag *ngSwitchCase="4" status='secondary' type="outline"
          class="text-body-2 font-regular text-neutral-1-900">{{
          data.status }}</tds-tag>
         <tds-tag *ngSwitchCase="5" status='info' type="outline" class="text-body-2 font-regular text-neutral-1-900">{{
          data.status }}</tds-tag>
        </div>
       </td>
       <td width="106px" [tdsRight]="true">
        <div class="flex gap-2 justify-center">
         <button *ngIf="data.status == '3'" (click)="onship(data)" tds-button-outline-icon color="secondary">
          <i class="tdsi-truck-fill text-neutral-1-300 border-neutral-1-200"></i>
         </button>
        </div>
       </td>
      </tr>
     </ng-template>
    </tbody>
   </tds-table>
  </div>
 </div>
 </div>
</div>


